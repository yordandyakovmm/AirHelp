@using AirHelp.Hellpers
@model AirHelp.DAL.Claim

<div class="register-form">
    <div class="progress">
        <div class="past">
            <div class="circle"><label>1</label></div>
            <label class="text">Данни за полета</label>
        </div>
        <div class="past">
            <div class="circle"><label>2</label></div>
            <label class="text">Описание на проблема</label>
        </div>
        <div class="past">
            <div class="circle"><label>3</label></div>
            <label class="text">Регистрация</label>
        </div>
        <div class="past">
            <div class="circle"><label>4</label></div>
            <label class="text">Подаване на иск</label>
        </div>

    </div>
    <div class="center-content">
        <form method="post">
            <input type="hidden" name="claimid" value="@Model.ClaimId">
            <div class="form-hedar uppercase">
                Благодарим Ви, че избрахте усугите на ХЕЛПКЛЕЙМС ООД
            </div>
            <div class="form-hedar uppercase">
                Проблем:  &nbsp;&nbsp; <span class="blue"> @Model.Type.ViewString() </span>
            </div>
            <div class="form-hedar ">
                Статус на заявката: <span class="blue">  @Model.State.ViewString() </span>
            </div>
            <div class="form-hedar">
                <span>Право на обезщетение</span> &nbsp;&nbsp; <span class="blue"> €@Model.CompensationAmount</span>
            </div>

            <div class="form-subtext">
                Данни за потребителя
            </div>

            <div class="form-row">
                <div class="form-box ">
                    <label class="heder ">Име</label>
                    <div>
                        <label class="data ">
                            @Model.User.FirstName
                        </label>
                    </div>
                </div>
                <div class="form-box">
                    <label class="heder ">Фамиля</label>
                    <div>
                        <label class="data ">
                            @Model.User.LastName
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-box">
                    <label class="heder ">Град</label>
                    <div>
                        <label class="data ">
                            @Model.User.City
                        </label>
                    </div>
                </div>
                <div class="form-box">
                    <label class="heder ">Държава </label>
                    <div>
                        <label class="data ">
                            @Model.User.Country
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-box-width">
                    <label class="heder ">Адрес</label>
                    <div>
                        <label class="data ">
                            @Model.User.Adress
                        </label>
                    </div>
                </div>

            </div>
            <div class="form-row ">
                <div class="form-box">
                    <label class="heder ">Емаил</label>
                    <div>
                        <label class="data ">
                            @Model.User.Email
                        </label>
                    </div>
                </div>
                <div class="form-box ">
                    <label class="heder "> Телефон</label>
                    <div>
                        <label class="data ">
                            @Model.User.Tel
                        </label>
                    </div>
                </div>
            </div>

            <div class="form-subtext">
                Данни за полета
            </div>


            @{
                var airPorts = Model.AirPorts.ToArray();
            }

            @for (int i = 0; i < airPorts.Length - 1; i++)
            {
                <div class="form-row atternate">
                    <div class="form-box-10">
                        @if (@airPorts[i].startIssue)
                        {
                            <b><label class="data ">@airPorts[i].FlightNumber</label></b>
                        }
                        else
                        {
                            <label class="data ">@airPorts[i].FlightNumber</label>
                        }
                    </div>
                    <div class="form-box-25">
                        <label class="heder ">
                            @airPorts[i].name (@airPorts[i].iata)
                        </label>
                        <label class="data">
                            @airPorts[i].city (@airPorts[i].country)
                        </label>

                    </div>
                    <div class="form-box-25">
                        <label class="heder ">
                            @airPorts[i].name (@airPorts[i + 1].iata)
                        </label>
                        <label class="data">
                            @airPorts[i].city (@airPorts[i + 1].country)
                        </label>
                    </div>
                    @if (User.IsInRole("admin"))
                    {
                        <label class="heder">
                            (@airPorts[i].distanceToNext/1000).ToString("0000")
                        </label>
                    }
                </div>

            }

            @if (User.IsInRole("admin"))
            {
                <div class="form-row">

                    <div class="form-box">
                        <label class="heder ">Обща дистанция на полета</label>
                        <div>
                            <label class="data ">
                                (@Model.allDistance/1000).ToString("0000")

                            </label>
                        </div>
                    </div>
                    <div class="form-box ">
                        <label class="heder ">Дистанция за обезщетение</label>
                        <div>
                            <label class="data ">
                                (@Model.issueDistance/1000).ToString("0000")

                            </label>
                        </div>
                    </div>
                </div>
            }


            <div class="form-row" style="justify-content:flex-start">
                <div class="form-box">
                    <label class="heder ">
                        Причина за проблема
                    </label>
                    <div>
                        <label class="data ">
                            @Model.Reason.ViewString()
                        </label>
                    </div>
                </div>
            </div>
            @if (Model.Type == AirHelp.Models.ProblemType.Delay)
            {
                <div class="form-row" style="justify-content:flex-start">
                    <div class="form-box">
                        <label class="heder ">
                            Закъснение на полета
                        </label>
                        <div>
                            <label class="data ">
                                @Model.DelayDelay.ViewString(Model.allDistance)
                            </label>
                        </div>
                    </div>
                </div>
            }

            @if (Model.Type == AirHelp.Models.ProblemType.Cancel)
            {

                <div class="form-row" style="justify-content:flex-start">
                    <div class="form-box">
                        <label class="heder ">
                            Уведомление за отмяната на полета
                        </label>
                        <div>
                            <label class="data ">
                                @Model.CancelAnnonsment.ViewString()
                            </label>
                        </div>
                    </div>
                </div>




            }
            @if (Model.Type == AirHelp.Models.ProblemType.Overbooking)
            {

                <div class="form-row" style="justify-content:flex-start">
                    <div class="form-box">
                        <label class="heder ">
                            Пристигane на чек-ин-а 30 минути преди излитането на самолета?
                        </label>
                        <div>
                            <label class="data ">
                                @Model.DenayArival.ViewString()
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-row" style="justify-content:flex-start">
                    <div class="form-box">
                        <label class="heder ">
                            Отказан достъп поради проблеми с документите или от съображения за сигурност
                        </label>
                        <div>
                            <label class="data ">
                                @Model.DocumentSecurity.ViewString()
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-row" style="justify-content:flex-start">
                    <div class="form-box">
                        <label class="heder ">
                            Доброволно предостъпено на мястото на борда
                        </label>
                        <div>
                            <label class="data ">
                                @Model.Willness.ViewString()
                            </label>
                        </div>
                    </div>
                </div>

            }
            @if (Model.Type == AirHelp.Models.ProblemType.Overbooking || Model.Type == AirHelp.Models.ProblemType.Cancel)
            {
                <div class="form-row" style="justify-content:flex-start">
                    <div class="form-box">
                        <label class="heder ">
                            Закъснение до крайната дестинация
                        </label>
                        <div>
                            <label class="data ">
                                @Model.CancelDelay.ViewString()
                            </label>
                        </div>
                    </div>
                </div>

            }

            <div class="form-row" id="AirCompany" style="justify-content:flex-start">
                <div class="form-box">
                    <label class="heder ">Номер на резервация или код за потвърждение</label>
                    <div>
                        <label class="data ">
                            @Model.BookingCode
                        </label>
                    </div>
                </div>
                <div class="form-box" style="justify-content:flex-start">
                    <label class="heder ">Въдушен превозвач</label>
                    <div>
                        <label class="data ">
                            @Model.AirCompany
                        </label>
                    </div>
                </div>

            </div>

            @if (Model.AdditionalInfo != "")
            {
                <div class="form-row" id="Info" style="flex-flow: column;">
                    <div class="form-box-width">
                        <label class="heder">Допълнителна информация</label>
                        <p class="">
                            @Model.AdditionalInfo
                        </p>
                    </div>
                </div>
            }


            <div class="form-hedar view">
                Копия на документи
            </div>
            <div class="form-row">
                <div class="form-box">

                    @foreach (var doc in Model.Documents)
                    {
                        <a href="@doc.Url" target="_blank">
                            <img src="@doc.Url" />
                        </a>
                    }


                </div>
            </div>



            @if (User.IsInRole("admin"))
            {
                <div class="form-row">
                    <div class="form-box">
                        <button class="submit-claim left-claim" type="button" onclick="window.open('@Model.AttorneyUrl', '_blank')"><i class="icon"></i><span>Пълномощно</span></button>
                    </div>
                    <div class="form-box">
                        <button class="submit-claim rigth-claim" type="button"><i class="icon"></i><span>Жалба</span></button>
                    </div>
                </div>
            }
            <div class="form-row">
                &nbsp;
            </div>
        </form>
    </div>


</div>

<script src="~/Scripts/form.js"></script>

